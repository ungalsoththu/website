---
phase: 01-foundation
plan: 01
type: execute
---

<objective>
Initialize Astro project with bilingual i18n routing configuration.

Purpose: Set up the foundational static site generator with proper internationalization for Tamil and English content.
Output: Working Astro project with i18n configured for / (English) and /ta (Tamil) routes.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/references/checkpoints.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md

**Tech stack from RESEARCH.md:**
- Astro 5.x (current) - Static site generator with built-in i18n
- Node.js 18+ - Required runtime

**Architecture patterns from RESEARCH.md:**
- Use Astro built-in i18n routing (v3+) - NOT external plugins
- Configure base: '/website' for GitHub Pages subdirectory
- prefixDefaultLocale: false for / (English) and /ta (Tamil) URLs

**Don't hand-roll (from RESEARCH.md):**
- Don't build manual /en, /ta folder logic - use Astro i18n config
- Don't use @astrojs/i18n external plugin - superseded by built-in

**Common pitfalls (from RESEARCH.md):**
- GitHub Pages pathPrefix issues - must set base: '/repo-name' in config
- Local works but deployed breaks = missing base configuration
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Astro project</name>
  <files>package.json, astro.config.mjs, src/pages/index.astro, tsconfig.json</files>
  <action>Run `npm create astro@latest -- --template minimal --no-install --no-git` in project root. Accept all defaults. This creates:
  - package.json with astro dependency
  - astro.config.mjs (empty config to be filled in Task 2)
  - src/pages/index.astro (starter page)
  - tsconfig.json (TypeScript config)

  Then run `npm install` to install dependencies.

  DO NOT use --git flag since this is already a git repo.
  DO NOT use templates with heavy boilerplate - minimal is best.
  </action>
  <verify>package.json exists with "astro" dependency, node_modules/ directory exists</verify>
  <done>Astro project initialized, dependencies installed, no errors in npm output</done>
</task>

<task type="auto">
  <name>Task 2: Configure i18n routing for bilingual support</name>
  <files>astro.config.mjs</files>
  <action>Replace astro.config.mjs with i18n configuration:

```javascript
import { defineConfig } from 'astro/config'

export default defineConfig({
  site: 'https://username.github.io', // Will be updated with actual username
  base: '/website', // Matches repo name, critical for GitHub Pages
  i18n: {
    defaultLocale: 'en',
    locales: ['en', 'ta'],
    routing: {
      prefixDefaultLocale: false, // / for English, /ta/ for Tamil
    }
  }
})
```

Key points:
- base: '/website' prevents 404s on GitHub Pages (common pitfall from RESEARCH.md)
- prefixDefaultLocale: false gives clean URLs (/ instead of /en/)
- site URL will be updated when GitHub repo is configured

DO NOT use external i18n plugins - Astro built-in is sufficient (per RESEARCH.md).
  </action>
  <verify>astro.config.mjs contains i18n config with defaultLocale: 'en', locales: ['en', 'ta']</verify>
  <done>Config has i18n section with both locales, base set to '/website', no TypeScript errors</done>
</task>

<task type="auto">
  <name>Task 3: Update homepage for bilingual landing</name>
  <files>src/pages/index.astro</files>
  <action>Replace default index.astro with a simple language selector landing page:

```astro
---
// Language selector landing page
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>UngalSoththu - உங்கள் சொத்து</title>
  </head>
  <body>
    <h1>UngalSoththu / உங்கள் சொத்து</h1>
    <p>This is Your Asset - Urban Transit Accountability</p>
    <nav>
      <a href="/">English</a>
      <a href="/ta/">தமிழ்</a>
    </nav>
  </body>
</html>
```

This is a temporary page to verify i18n routing works. Will be replaced with proper layout in plan 01-03.
  </action>
  <verify>src/pages/index.astro exists with language links</verify>
  <done>Homepage shows language links, no syntax errors</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Astro project with i18n configuration</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:4321
    3. Verify: Page loads without errors
    4. Visit: http://localhost:4321/ta/
    5. Verify: Same page loads (routing works, content will be added later)
    6. Check: Console shows no errors
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm run dev` starts dev server
- [ ] Visiting http://localhost:4321 loads the page
- [ ] Visiting http://localhost:4321/ta/ loads without 404
- [ ] No TypeScript or Astro config errors
</verification>

<success_criteria>

- Astro project initialized with minimal template
- i18n configured for en (default) and ta locales
- base path set for GitHub Pages compatibility
- Dev server runs without errors
- Build completes successfully
  </success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`:

# Phase 1 Plan 1: Astro Project & i18n Setup Summary

**Astro project initialized with bilingual i18n routing configured.**

## Accomplishments

- Astro 5.x project initialized with minimal template
- i18n routing configured for English (default, /) and Tamil (/ta/)
- GitHub Pages base path configured to prevent asset 404s
- Dev server and build process verified working

## Files Created/Modified

- `package.json` - Astro dependencies and scripts
- `astro.config.mjs` - i18n configuration with en/ta locales, base path
- `src/pages/index.astro` - Temporary language selector page
- `tsconfig.json` - TypeScript configuration

## Decisions Made

- Used Astro built-in i18n (not external plugin) - per RESEARCH.md recommendation
- Set prefixDefaultLocale: false for clean English URLs (/ instead of /en/)
- Configured base: '/website' for GitHub Pages subdirectory hosting

## Issues Encountered

None

## Next Step

Ready for 01-02-PLAN.md (GitHub Actions Deployment)
</output>
